<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holographic 3D Viewer</title>

    <!-- Model Viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <!-- GSAP Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600;700&display=swap"
        rel="stylesheet">

    <style>
        /* === CORE VARIABLES === */
        :root {
            --neon-blue: #00f3ff;
            --neon-purple: #b24bf3;
            --glass-bg: rgba(10, 15, 30, 0.7);
            --glass-border: rgba(0, 243, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: transparent;
            font-family: 'Inter', sans-serif;
            color: white;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* === HOLOGRAPHIC CARD === */
        .holo-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow:
                0 0 40px rgba(0, 243, 255, 0.1),
                inset 0 0 60px rgba(0, 243, 255, 0.02);
            overflow: hidden;
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: scale(0.95) translateY(20px);
            width: 90vw;
            max-width: 800px;
            height: 90vh;
            max-height: 600px;
        }

        .holo-card.active {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        .holo-card:hover {
            border-color: rgba(0, 243, 255, 0.4);
            box-shadow:
                0 0 60px rgba(0, 243, 255, 0.2),
                inset 0 0 80px rgba(0, 243, 255, 0.05);
            transform: scale(1.02) translateY(-5px);
        }

        /* Card Header */
        .card-header {
            height: 60px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.1) 0%, transparent 100%);
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--neon-blue);
            letter-spacing: 3px;
            font-weight: 700;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--neon-blue);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                box-shadow: 0 0 10px var(--neon-blue);
            }

            50% {
                opacity: 0.5;
                box-shadow: 0 0 20px var(--neon-blue);
            }
        }

        /* 3D Model Stage */
        .model-stage {
            width: 100%;
            height: calc(100% - 60px);
            position: relative;
            background: radial-gradient(circle at center, rgba(0, 243, 255, 0.05) 0%, transparent 70%);
        }

        model-viewer {
            width: 100%;
            height: 100%;
            background-color: transparent;
            --poster-color: transparent;
        }

        /* Custom Interaction Hint */
        .interaction-hint {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            align-items: center;
            gap: 0.8rem;
            background: rgba(0, 243, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--neon-blue);
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 1px;
            z-index: 5;
            pointer-events: none;
            opacity: 1;
        }

        .interaction-hint-icon {
            font-size: 1.5rem;
            animation: fingerSwipe 1.5s ease-in-out infinite;
        }

        @keyframes hintFadeIn {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes hintFadeOut {
            to {
                opacity: 0;
                transform: translateX(-50%) translateY(10px);
            }
        }

        @keyframes fingerSwipe {

            0%,
            100% {
                transform: translateX(0);
            }

            50% {
                transform: translateX(10px);
            }
        }

        /* Scanner Overlay */
        .scanner-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
        }

        .scanner-overlay.hidden {
            display: none;
        }

        .scan-grid {
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(0, 243, 255, 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.15) 1px, transparent 1px);
            background-size: 20px 20px;
            mask-image: linear-gradient(to bottom, transparent, black 20%, black 80%, transparent);
            animation: scanGridMove 2s linear infinite;
        }

        @keyframes scanGridMove {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(20px);
            }
        }

        .scan-line {
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
            box-shadow: 0 0 20px var(--neon-blue), 0 0 40px var(--neon-blue);
            position: absolute;
            top: 0;
            animation: scanMove 1.5s ease-in-out infinite;
        }

        @keyframes scanMove {
            0% {
                top: 0%;
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                top: 100%;
                opacity: 0;
            }
        }

        .loading-text {
            color: white;
            font-family: 'Orbitron', monospace;
            background: rgba(0, 243, 255, 0.1);
            padding: 0.8rem 1.5rem;
            border: 2px solid var(--neon-blue);
            border-radius: 8px;
            font-size: 1rem;
            letter-spacing: 2px;
            z-index: 2;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.3);
            animation: textPulse 1.5s ease-in-out infinite;
        }

        @keyframes textPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        /* Control Buttons */
        .control-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 15;
        }

        .control-btn {
            padding: 0.6rem 1.2rem;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            border: none;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 0.75rem;
            letter-spacing: 1px;
            cursor: pointer;
            border-radius: 8px;
            color: white;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .control-btn:hover::before {
            width: 200px;
            height: 200px;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.6);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .control-btn span {
            position: relative;
            z-index: 1;
        }
    </style>
</head>

<body>

    <!-- Holographic 3D Viewer Card -->
    <div class="holo-card" id="modelCard">
        <div class="card-header">
            <span class="card-title">UNITREE GO2</span>
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>LIVE</span>
            </div>
        </div>

        <div class="model-stage">
            <!-- Scanner Overlay -->
            <div class="scanner-overlay" id="scanner">
                <div class="scan-grid"></div>
                <div class="scan-line"></div>
                <div class="loading-text">INITIALIZING HOLOGRAM...</div>
            </div>

            <!-- Custom Interaction Hint -->
            <div class="interaction-hint" id="interactionHint">
                <span class="interaction-hint-icon">ðŸ‘†</span>
                <span>Drag to explore</span>
            </div>

            <!-- 3D Model Viewer -->
            <model-viewer id="robot" src="./robot_dog_unitree_go2.glb" camera-controls auto-rotate
                rotation-per-second="-30deg" auto-rotate-delay="0" shadow-intensity="2.0" shadow-softness="0.5"
                exposure="0.9" tone-mapping="commerce" environment-image="neutral" camera-orbit="45deg 65deg 1.8m"
                min-camera-orbit="auto auto 1.2m" max-camera-orbit="auto auto 3.5m" field-of-view="30deg"
                interaction-prompt="none" disable-tap>
            </model-viewer>

            <!-- Control Panel -->
            <div class="control-panel">
                <button class="control-btn" id="activateBtn" onclick="activateHologram()">
                    <span>ACTIVATE</span>
                </button>
                <button class="control-btn" id="scannerBtn" onclick="toggleScanner()">
                    <span>SCANNER</span>
                </button>
                <button class="control-btn" id="resetBtn" onclick="resetView()">
                    <span>RESET</span>
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // === INITIALIZATION ===
        const modelCard = document.getElementById('modelCard');
        const scanner = document.getElementById('scanner');
        const robot = document.getElementById('robot');
        const activateBtn = document.getElementById('activateBtn');
        const scannerBtn = document.getElementById('scannerBtn');
        const interactionHint = document.getElementById('interactionHint');

        let scannerMode = false;
        let animationFrame = null;

        // Animate card on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                modelCard.classList.add('active');
            }, 300);
        });

        // === HOLOGRAM ACTIVATION ===
        function activateHologram() {
            // Reset state
            gsap.set(robot, { opacity: 0 });
            scanner.classList.remove('hidden');
            scanner.style.opacity = 1;

            // Card entrance animation
            gsap.to(modelCard, {
                duration: 0.6,
                scale: 1.02,
                ease: "back.out(1.3)"
            });

            // Minimum scanner display time
            const minWaitTime = 2000;
            const startTime = Date.now();

            const onModelReady = () => {
                const elapsed = Date.now() - startTime;
                const remaining = Math.max(0, minWaitTime - elapsed);

                setTimeout(() => {
                    // Create reveal timeline with cinematic zoom
                    const tl = gsap.timeline();

                    // Fade out scanner
                    tl.to(scanner, {
                        duration: 0.4,
                        opacity: 0,
                        onComplete: () => scanner.classList.add('hidden')
                    });

                    // Set initial far camera position for zoom effect
                    robot.cameraOrbit = '45deg 65deg 3.5m';

                    // Fade in robot
                    tl.to(robot, {
                        duration: 0.6,
                        opacity: 1,
                        ease: "power2.out"
                    }, "-=0.2");

                    // Cinematic zoom in effect
                    tl.to({}, {
                        duration: 2.5,
                        ease: "power2.inOut",
                        onUpdate: function () {
                            const progress = this.progress();
                            // Smooth zoom from 3.5m to 1.8m
                            const distance = 3.5 - (progress * 1.7);
                            // Slight vertical movement for dynamic feel
                            const phi = 65 + Math.sin(progress * Math.PI) * 5;
                            robot.cameraOrbit = `45deg ${phi}deg ${distance}m`;
                        }
                    }, "-=0.3");

                    // Reset card scale
                    tl.to(modelCard, {
                        duration: 0.4,
                        scale: 1,
                        ease: "power2.inOut"
                    }, "-=1.5");

                    // Show interaction hint after zoom completes
                    tl.call(() => {
                        interactionHint.style.display = 'flex';
                        // Auto-hide after 3 seconds
                        setTimeout(() => {
                            interactionHint.style.animation = 'hintFadeOut 0.5s ease-out forwards';
                        }, 3000);
                    }, null, "+=0.5");

                    // Update button
                    activateBtn.querySelector('span').textContent = 'REACTIVATE';

                }, remaining);
            };

            // Check if model is loaded
            if (robot.loaded) {
                onModelReady();
            } else {
                robot.addEventListener('load', onModelReady, { once: true });
            }
        }

        // === CINEMATIC SCANNER MODE ===
        function toggleScanner() {
            scannerMode = !scannerMode;

            if (scannerMode) {
                scannerBtn.querySelector('span').textContent = 'STOP';
                startCinematicScanner();
            } else {
                scannerBtn.querySelector('span').textContent = 'SCANNER';
                stopCinematicScanner();
            }
        }

        function startCinematicScanner() {
            let time = 0;
            const scanSpeed = 0.015;

            function animateScanner() {
                if (!scannerMode || !robot) return;

                // Calculate vertical angle (Phi) with sine wave
                const phi = 75 + Math.sin(time) * 35;

                // Get current orbit
                const orbit = robot.getCameraOrbit();
                const theta = orbit.theta;

                // Add zoom pulse effect
                const radius = 2.5 + Math.sin(time * 1.5) * 0.3;

                // Apply new orbit
                robot.cameraOrbit = `${theta}rad ${phi}deg ${radius}m`;

                time += scanSpeed;
                animationFrame = requestAnimationFrame(animateScanner);
            }

            animateScanner();
        }

        function stopCinematicScanner() {
            if (animationFrame) {
                cancelAnimationFrame(animationFrame);
                animationFrame = null;
            }

            // Reset to default orbit
            gsap.to(robot, {
                duration: 1,
                onUpdate: function () {
                    robot.cameraOrbit = '45deg 65deg 2.5m';
                }
            });
        }

        // === RESET VIEW ===
        function resetView() {
            scannerMode = false;
            stopCinematicScanner();

            // Reset camera
            robot.cameraOrbit = '45deg 65deg 2.5m';
            robot.fieldOfView = '30deg';

            // Reset UI
            gsap.to(modelCard, {
                duration: 0.4,
                scale: 1,
                ease: "power2.inOut"
            });

            scannerBtn.querySelector('span').textContent = 'SCANNER';
        }

        // === AUTO-ACTIVATE ON LOAD ===
        robot.addEventListener('load', () => {
            setTimeout(() => {
                activateHologram();
            }, 500);
        });

        // === SMOOTH MOUSE INTERACTION ===
        // Only pause rotation when user actively drags
        let interactionTimeout = null;

        const pauseRotation = () => {
            robot.autoRotate = false;
            clearTimeout(interactionTimeout);
            interactionTimeout = setTimeout(() => {
                robot.autoRotate = true;
            }, 2000);
        };

        robot.addEventListener('mousedown', pauseRotation);
        robot.addEventListener('touchstart', pauseRotation);
    </script>

</body>

</html>